# 第一次技术规划讨论纪要
> 参与人，陈雄、王荣磊、杨阳、岳鹏飞
> 2022/12/30
## 技术应用现状与亟待解决的问题
> 业务逻辑：指通过代码（技术）对业务逻辑的实现
### 1. 技术债
- 功能堆砌，业务逻辑边界模糊；
- 不同工程（模块）中存在数量不可忽略的相同业务逻辑、相似功能；
- 寻找“技术债”积累的原因；
- 寻找降低“技术债”积累速度的手段；
### 2. 业务逻辑与质量稳定性
- 业务逻辑影响范围不确定，黑盒状态，依赖研发人员的业务逻辑熟悉程度
- 基础业务能力（模块）未成形，无业务逻辑积累
- 每次业务需求的扩展与变化都会对相关的业务逻辑产生影响，挑战代码质量与产品质量的稳定性
### 3. 工作量
对开发成本的判断与评估，目前无法对评估的工作量进行判断
- 是否存在未识别的部分，即开发范围
- 已识别部分的准确程度，即开发复杂度
### 4. 研发成本
#### 4.1 减少重复开发
增加跨工程重用度，避免“无效/低效”的开发行为。
#### 4.3 降低开发难度
包装基础业务逻辑，隐藏复杂业务逻辑，并通过接口对外暴露，降低由于业务逻辑理解难度大带来的开发成本。
### 5. 提升设计权重
目前开发阶段的概要设计、详细设计，是软件工程的环节与产物，是面向业务需求的，没有软件架构方面设计原则与设计思想的应用。
软件架构设计是可持续的，长效的，是解决业务积累副作用的手段之一。
建立设计意识形态，扭转前端无设计的局面。
> 业务积累副作用：业务领域间耦合度增高，组件可复用度降低
### 6. 研发人员角色
对研发人员的技术开发“角色”进行梯队划分
- 发挥优势
- 合适的人做合适的事

### 7. 关键词
- 重用度
- 耦合度
- 聚合度

## 寻找切入点
### 手段
针对目前 Vuejs2/3 技术栈；
##### 组件化
Node package，多包架构形态，解决跨工程重用，减少从零开发的情况；
生命周期维护；
##### 模块化
对产品业务领域进行分析，从独立业务领域入手，**优先选择具备重用条件的**，进行包装。
应用**开闭原则**
黑盒->白盒->黑盒的过程:
1. 黑盒，业务逻辑边界模糊，耦合度高
2. 白盒，分析、包装，提高业务模块内聚程度，对外暴露接口，使边界清晰、规范
3. 黑盒，业务模块的消费方仅需了解接口和行为，隐藏业务模块内部逻辑，达到“隔离”的效果
### 形态
CBB 和 微前端

### 流程
> 设计小组，陈雄、王荣磊、杨阳、岳鹏飞，“自由人”

1. 选定素材，明确设计目标、产出物形态
- 输出选材原则

2. 设计小组共识设计原则
- 记录设计原则、设计思想形成过程
- 输出可执行的设计规范、检查单

3. 制定计划
4. 开发
- 王荣磊首先入场
- 过程中保持审视，持续修正
- 允许推翻，重新讨论
5. 落地应用

### 落地
##### 选材
组件化，重用度作为唯一判断依据
模块化
- 从产品业务领域维度进行选材
- 优先选择可重用的
##### 接口设计
业务模块能够独立支撑业务，模块建解耦、隔离；
识别暂时无法解耦的业务模块，增加适配器，例如权限、流程发起、管控机制
##### 模块逻辑设计
拆解为纯函数和界面层；
应用设计原则、设计模式；
健壮性（鲁棒性），提升容错能力；
可调式、可诊断，错误提示明确；

### 角色
##### 生产者
理解设计思想、设计理论的人员，组成具备设计应用、实践能力的“设计小组”
##### 消费者
能够正确使用组件化产物与模块化产物的人员；
了解组件清单，了解组件特性与使用场景；
了解模块接口规范；
##### 维护者
1. 设计小组
2. 待定

# 第二次技术规划讨论纪要
> 参与人，王荣磊、杨阳、岳鹏飞
> 2023/1/03

## 组件与模块输出形态
步骤1
业务逻辑层与表现层分别进行组件化【CBB】
> **约束**
> 表现层输出组件引用不能显式依赖业务逻辑层组件【peer dependency】

步骤2
改造现有模块，作为微前端应用基座
构建微前端应用，以技术栈维度
引入业务逻辑组件【CBB】
迁移表现层

步骤3
引入微应用

回退方案
现有模块直接使用CBB组件

## 设计原则
函数式
- 使用函数式，
- 粒度为业务模块能力
- 能力可能来自对多个相似相近业务的分析
- 为保证能力的单一职责，相似相近能力可冗余
- 不局限能力的应用范围，其他业务模块存在使用场景，可进行组件化【可选】

能力组合
- 按需组合业务模块能力

渐进式
- 控制分析过程中业务模块的范围
- 保持业务模块隔离的特性，不必一次性对全部相似相近业务模块进行分析
- 早期允许耦合未进行模块化的业务
- 通过迭代对不稳定的能力进行重构

# 第三次技术规划讨论纪要
> 参与人，王荣磊、杨阳、岳鹏飞
> 2023/1/04
## CBB 形态
每个 CBB 的范围边界为业务领域
1. 基础能力层（底层）
- 功能函数
- 纯函数【单一职责原则】
2. 业务逻辑层（核心）
- 类/功能函数，需要讨论两种形式的优劣
3. 表现层
- 通过UI组件库搭建，包含交互逻辑
- 边界待讨论，判断原则是表现层与业务逻辑层的松耦合、表现层逻辑是否纯粹
4. 表现层为独立 CBB
5. 业务逻辑层与基础能力层存在于同一 CBB

> 检查单
> 新建项目的时的 code review